(this.webpackJsonpviews=this.webpackJsonpviews||[]).push([[0],{227:function(e,t,a){e.exports=a.p+"static/media/logo.c4c0a4c3.svg"},234:function(e,t,a){e.exports=a.p+"static/media/workout_icon.124d0099.svg"},235:function(e,t,a){e.exports=a.p+"static/media/back_icon.206a4cae.svg"},237:function(e,t,a){e.exports=a(400)},242:function(e,t,a){},243:function(e,t,a){},290:function(e,t){},292:function(e,t){},306:function(e,t){},308:function(e,t){},336:function(e,t){},338:function(e,t){},339:function(e,t){},345:function(e,t){},347:function(e,t){},365:function(e,t){},367:function(e,t){},379:function(e,t){},382:function(e,t){},400:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(47),l=a.n(c),o=(a(242),a(7)),s=(a(243),a(38)),m=a(15),u=a(9),i=a.n(u),p=a(23),E=a(222),d=a(408),b=a(409),h=a(404),f=a(31),g=a(86),v=a(407),k=a(410);function _(e){var t=e.workout,a=(t._id,t.workout_type),c=Object(n.useState)(e.formData.pb_date),l=Object(o.a)(c,2),s=l[0],m=l[1],u=Object(n.useState)(""),d=Object(o.a)(u,2),b=d[0],_=d[1],x=Object(n.useState)(""),j=Object(o.a)(x,2),w=j[0],N=j[1],y=Object(n.useState)(""),O=Object(o.a)(y,2),S=O[0],C=O[1],D=function(t){e.setFormData(Object(g.a)(Object(g.a)({},e.formData),{},Object(f.a)({},t.target.name,t.target.value)))},M=function(){var t=Object(p.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addHandler();case 2:m((new Date).toISOString().substring(0,10)),_(""),N(""),C("");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(E.a,null,r.a.createElement(v.a,null,r.a.createElement(v.a.Group,{as:h.a},r.a.createElement(E.a,{className:"col-5 p-0"},"weightlifting"!==a&&r.a.createElement(h.a,{className:"mx-2 text-center"},r.a.createElement(E.a,{className:"p-0 time__input"},r.a.createElement(v.a.Control,{className:"text-center",size:"sm",type:"number",placeholder:"00",value:w,name:"pb_time_min",onChange:function(e){N(e.target.value),D(e)}})),r.a.createElement("span",{className:"my-auto mx-1"},":"),r.a.createElement(E.a,{className:"p-0 time__input"},r.a.createElement(v.a.Control,{className:"text-center",size:"sm",type:"number",placeholder:"00",value:S,name:"pb_time_sec",onChange:function(e){C(e.target.value),D(e)}}))),r.a.createElement(E.a,null,r.a.createElement(v.a.Control,{size:"sm",type:"number",placeholder:"lb",value:b,name:"pb_weight",onChange:function(e){_(e.target.value),D(e)}}))),r.a.createElement(E.a,{className:"col-5 p-0"},r.a.createElement(v.a.Control,{size:"sm",type:"date",value:s,name:"pb_date",onChange:function(e){m(e.target.value),D(e)}})),r.a.createElement(E.a,{className:"col-2 p-0 pl-1 "},r.a.createElement(k.a,{className:"btn btn-block",size:"sm",onClick:M},"+")))))}var x=a(406),j=a(62),w=a.n(j),N=a(11),y=a.n(N);function O(e){var t=e.record,a=t.pb_date,c=t.pb_time_min,l=t.pb_time_sec,s=t.pb_weight,m=t.prescribed,u=(t.liked_by,e.workout),d=(u._id,u.description,u.prescribed_female,u.prescribed_male),b=(u.workout_name,"");switch(u.workout_type){case"weightlifting":b="".concat(s,"lb");break;case"benchmark":b="".concat(c,":").concat(l.toString().padStart(2,"0"))}var f=w()().diff(a,"days")>5?w()(a).format("D MMM YYYY"):w()(a).fromNow(),g=function(){var t=Object(p.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),t.prev=1,t.next=4,y.a.delete("".concat("https://pbandjot.herokuapp.com/api","/records/").concat(a),{headers:{"x-auth-token":n}});case 4:return t.sent,t.next=7,e.fetchRecords();case 7:O(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),v=Object(n.useState)(!1),_=Object(o.a)(v,2),j=_[0],N=_[1],O=function(){return N(!1)},S=r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"my-2"},r.a.createElement(E.a,{xs:5},r.a.createElement(h.a,{className:""},r.a.createElement(E.a,{className:"text-right p-0"},b),r.a.createElement(E.a,{className:"p-0 pl-1 text-center"},d&&m&&"Rx"))),r.a.createElement(E.a,{xs:5,className:"text-muted font-italic text-center"},f),r.a.createElement(E.a,{xs:2},r.a.createElement(k.a,{size:"sm",variant:"outline-danger",onClick:function(){return N(!0)}},"-"))),r.a.createElement(x.a,{show:j,onHide:O},r.a.createElement(x.a.Header,{closeButton:!0},"Delete record?"),r.a.createElement(x.a.Footer,null,r.a.createElement(k.a,{variant:"secondary",onClick:O},"No"),r.a.createElement(k.a,{variant:"danger",onClick:function(){return g(e.record._id)}},"Yes"))));return r.a.createElement("div",null,S)}function S(e){var t=function(){if(N.length>0)switch(x.workout_type){case"weightlifting":var e=N[0].pb_weight;return N.forEach((function(t){e<t.pb_weight&&(e=t.pb_weight)})),"".concat(e,"lb");case"benchmark":var t=86400;return N.forEach((function(e){var a=60*e.pb_time_min+e.pb_time_sec;t>a&&(t=a)})),"".concat(Math.floor(t/60),":").concat((t%60).toString().padStart(2,"0"))}},a=Object(n.useState)((new Date).toISOString().substring(0,10)),c=Object(o.a)(a,2),l=c[0],s=(c[1],{pb_date:l,pb_weight:null,pb_time_min:null,pb_time_sec:null,workout_id:e.workout._id}),m=Object(n.useState)(s),u=Object(o.a)(m,2),f=u[0],g=u[1],v=Object(n.useState)(e.workout),k=Object(o.a)(v,2),x=k[0],j=(k[1],Object(n.useState)(e.workout.records)),w=Object(o.a)(j,2),N=w[0],S=w[1],C=Object(n.useState)(t()),D=Object(o.a)(C,2),M=D[0],F=D[1],T=function(){var a=Object(p.a)(i.a.mark((function a(){var n,r;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("token"),a.next=3,y.a.get("".concat("https://pbandjot.herokuapp.com/api","/records/workouts/").concat(e.workout._id),{headers:{"x-auth-token":n}});case 3:r=a.sent,S(r.data.records),F(t()),console.log(M);case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Object(n.useEffect)((function(){T()}),[]);var I=function(){var e=Object(p.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,y.a.post("".concat("https://pbandjot.herokuapp.com/api","/records"),f,{headers:{"x-auth-token":t}});case 3:e.sent,T();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return N.sort((function(e,t){return e.pb_date>t.pb_date?-1:e.pb_date<t.pb_date?1:0})),r.a.createElement(E.a,{className:"mx-auto my-1 "},r.a.createElement(d.a,null,r.a.createElement(b.a,{className:"record__card"},r.a.createElement(d.a.Toggle,{className:"text-left",as:b.a.Header,eventKey:"0"},r.a.createElement(h.a,null,r.a.createElement(E.a,null,x.workout_name),r.a.createElement(E.a,{className:"text-right"},M))),r.a.createElement(d.a.Collapse,{eventKey:"0"},r.a.createElement(b.a.Body,{className:"small__text"},r.a.createElement(h.a,{className:""},r.a.createElement(_,{workout:x,formData:f,setFormData:g,addHandler:I})),r.a.createElement(h.a,null,r.a.createElement(E.a,null,N.map((function(e){return r.a.createElement(O,{workout:x,record:e,key:e._id,fetchRecords:T})})))))))))}function C(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(a),s=Object(o.a)(l,2),m=s[0],u=s[1],E=function(){var e=Object(p.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],n="all"!==t.target.value?a.filter((function(e){return e.workout_type===t.target.value})):a,u(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=localStorage.getItem("token"),t=null,a=null;(function(){var e=Object(p.a)(i.a.mark((function e(n){var r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat("https://pbandjot.herokuapp.com/api","/records"),{headers:{"x-auth-token":n}});case 3:return r=e.sent,t=r.data.records,e.next=7,y.a.get("".concat("https://pbandjot.herokuapp.com/api","/workouts"));case 7:l=e.sent,(a=l.data.workouts).forEach((function(e){e.records=[],t.forEach((function(t){e._id.toString()==t.workout_id.toString()&&e.records.push(t)}))})),a.sort(d),c(a),u(a),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}})()(e)}),[]);var d=function(e,t){if(e.records.length>0&&t.records.length>0){var a=b(e.records),n=b(t.records);return a>n?-1:a<n?1:0}return 0==e.records.length&&t.records.length>0?1:0==t.records.length&&e.records.length>0?-1:0},b=function(e){var t=e[0].pb_date;return e.forEach((function(e){e.pb_date>t&&(t=e.pb_date)})),t};return r.a.createElement("div",null,r.a.createElement("div",{className:"my-2"},r.a.createElement(k.a,{value:"all",onClick:E,variant:"outline-dark"},"All")," ",r.a.createElement(k.a,{value:"weightlifting",onClick:E,variant:"outline-dark"},"Weightlifting")," ",r.a.createElement(k.a,{value:"benchmark",onClick:E,variant:"outline-dark"},"Benchmark WODs")," "),m?m.map((function(e){return r.a.createElement(S,{workout:e,key:e._id})})):"STANDBY FOR GAINS")}var D=a(227),M=a.n(D),F=a(148);function T(e){var t=e.size?e.size:80;return r.a.createElement(F.Fade,null,r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"square"},r.a.createElement("img",{src:M.a,alt:"pbandjot",width:t,className:"p-2"}))))}function I(e){var t=Object(m.f)(),a=e.workout;return r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(b.a,{as:"a",href:"#",className:"record__card my-1",onClick:function(){e.setCurrentWorkout(a),t.push("/workout")}},r.a.createElement(b.a.Header,null,r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"text-left my-auto"},a.workout_name," "),r.a.createElement(E.a,{className:"text-right font-italic"},r.a.createElement(h.a,null,r.a.createElement(E.a,null,a.pb_value)),r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"small font-weight-light"},a.pb_date?w()(a.pb_date).format("DD MMM"):""))))))))}function R(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],l=a[1],s=function(e,t){if(!(e.length>0))return"";switch(t){case"weightlifting":var a=e[0].pb_weight,n=e[0].pb_date;return e.forEach((function(e){a<e.pb_weight&&(a=e.pb_weight,n=e.pb_date)})),{pb_value:"".concat(a," lb"),pb_date:n};case"benchmark":var r=86400,c=e[0].pb_date;return e.forEach((function(e){var t=60*e.pb_time_min+e.pb_time_sec;r>t&&(r=t,c=e.pb_date)})),{pb_value:"".concat(Math.floor(r/60),":").concat((r%60).toString().padStart(2,"0")),pb_date:c}}},m=function(e){if(e.length>0){var t=e[0].pb_date;return e.forEach((function(e){e.pb_date>t&&(t=e.pb_date)})),t}return""},u=function(e,t){return e.records.length>0&&t.records.length>0?e.latest_record_date>t.latest_record_date?-1:e.latest_record_date<t.latest_record_date?1:0:0==e.records.length&&t.records.length>0?1:0==t.records.length&&e.records.length>0?-1:0},d=function(){var e=Object(p.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,y.a.get("".concat("https://pbandjot.herokuapp.com/api","/records/allworkouts"),{headers:{"x-auth-token":t}});case 3:a=e.sent,(n=a.data.workouts).forEach((function(e){var t=s(e.records,e.workout_type);e.pb_value=t.pb_value,e.pb_date=t.pb_date,e.latest_record_date=m(e.records)})),n.sort(u),l(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){d()}),[]);var b=c.map((function(t){return r.a.createElement(I,{workout:t,setCurrentWorkout:e.setCurrentWorkout,key:t._id})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"mt-3"},r.a.createElement(E.a,null,b)))}function W(e){var t=e.user,a=e.isAuth,n=e.setCurrentWorkout,c=a?120:180;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{xs:"auto"},r.a.createElement(T,{size:c}))),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"justify-content-center mt-2"},r.a.createElement(E.a,{xs:"auto"},r.a.createElement("h5",null,"Your personal bests."))),r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{md:{span:8},xs:{span:10},className:"text-center"},r.a.createElement(R,{user:t,isAuth:a,setCurrentWorkout:n})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{xs:"auto mt-2"},r.a.createElement("h1",null,"PB&Jot"))),r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{xs:"auto"},r.a.createElement("h4",null,"Record your personal bests."))),r.a.createElement(h.a,{className:"justify-content-center my-3"},r.a.createElement(E.a,{md:{span:3},xs:{span:8},className:""},r.a.createElement(k.a,{variant:"warning",block:!0,href:"/login"},"Login"))),r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{md:{span:3},xs:{span:8},className:""},r.a.createElement(k.a,{variant:"warning",block:!0,href:"/register"},"Register")))))}var G=a(405);function H(e){var t=e.isAuth,a=Object(m.f)();return r.a.createElement("div",null,r.a.createElement(s.b,{to:"/home",onClick:e.closeMenu,className:"bm-item"},"Home"),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"#",onClick:function(){e.closeMenu(),e.logoutHandler(),a.push("/home")},className:"bm-item"},"Logout")),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"/register",onClick:e.closeMenu,className:"bm-item"},"Register"),r.a.createElement(s.b,{to:"/login",onClick:e.closeMenu,className:"bm-item"},"Login")),r.a.createElement(s.b,{to:"/calculator",onClick:e.closeMenu,className:"bm-item"},"Calculator"))}var B=a(229);function A(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],l=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.slide,{width:150,isOpen:c,onStateChange:function(e){return function(e){l(e.isOpen)}(e)},pageWrapId:"page-wrap",outerContainerId:"outer-container"},r.a.createElement(H,{closeMenu:function(){l(!1),console.log("something happened")},isAuth:e.isAuth,logoutHandler:e.logoutHandler})))}var P=a(53),L=a(54),Y=a(60),z=a(58),U=(n.Component,n.Component,n.Component,a(59)),q=a(12);function V(e){var t=Object(U.a)({initialValues:{username:"",password:""},validationSchema:q.d().shape({username:q.e().required("Required").test("checkUsernameExists","Username already exists",(function(e){return new Promise((function(t,a){y.a.get("".concat("https://pbandjot.herokuapp.com/api","/auth/usercheck/").concat(e)).then((function(e){"User exists"==e.data.message?t(!1):t(!0)})).catch((function(e){console.log(e)}))}))})),password:q.e().min(8,"Must be more than 8 characters").required("Required")}),onSubmit:function(t){e.saveData(t),e.nextStep()}}),a=t.getFieldProps,n=t.handleSubmit,c=(t.values,t.errors),l=t.touched,o=l.username&&(c.username?r.a.createElement("span",{className:"red__text"},c.username):"You are unique."),s=o||r.a.createElement("span",null,"\xa0"),m=c.password&&l.password?c.password:null,u=m||r.a.createElement("span",null,"\xa0");return r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"text-center"},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Select a Username"),r.a.createElement(v.a.Control,Object.assign({type:"text",id:"username",placeholder:""},a("username"))),r.a.createElement(v.a.Text,null,s)))),r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"text-center"},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,Object.assign({type:"password",id:"password",placeholder:""},a("password"))),r.a.createElement(v.a.Text,null,r.a.createElement("span",{className:"red__text"},u))))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{variant:"warning",block:!0,onClick:n},"Next")))))}function J(e){var t=Object(U.a)({initialValues:{firstname:"",lastname:"",email:""},validationSchema:q.d().shape({firstname:q.e(),lastname:q.e(),email:q.e().email("Invalid email address").required("Required").test("checkEmailExists","Email already exists.",(function(e){return new Promise((function(t,a){y.a.get("".concat("https://pbandjot.herokuapp.com/api","/auth/emailcheck/").concat(e)).then((function(e){"Email exists"==e.data.message?t(!1):t(!0)})).catch((function(e){console.log(e)}))}))}))}),onSubmit:function(t){e.saveData(t),e.nextStep()}}),a=t.getFieldProps,n=t.handleSubmit,c=(t.values,t.errors),l=t.touched,o=c.email&&l.email?c.email:null,s=o||r.a.createElement("span",null,"\xa0");return r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"text-center"},r.a.createElement(v.a.Label,null,"Contact Details"),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,Object.assign({className:"text-center",type:"text",placeholder:"First Name"},a("firstname"))),c.firstname&&l.firstname?c.firstname:null))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,Object.assign({className:"text-center",type:"text",placeholder:"Last Name"},a("lastname"))),c.lastname&&l.lastname?c.lastname:null))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a.Group,{className:"text-center"},r.a.createElement(v.a.Control,Object.assign({className:"text-center",type:"email",placeholder:"Email"},a("email"))),r.a.createElement(v.a.Text,{className:"red__text"},s)))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{block:!0,variant:"warning",onClick:n},"Next")))))}function K(e){var t=Object(U.a)({initialValues:{gender:"Gender",height:null,weight:null,home_gym:"",date_of_birth:""},validationSchema:q.d().shape({gender:q.b().oneOf(["M","F"],"Please select gender."),height:q.c().nullable(),weight:q.c().nullable(),home_gym:q.e(),date_of_birth:q.a()}),onSubmit:function(t){console.log(t);var a={gender:t.gender,user_details:{height:t.height,weight:t.weight,home_gym:t.home_gym,date_of_birth:t.date_of_birth}};e.saveData(a),e.registerUser()}}),a=t.getFieldProps,n=t.handleSubmit,c=(t.values,t.errors),l=t.touched;return r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(h.a,{className:"mt-3"},r.a.createElement(E.a,null,r.a.createElement(v.a.Group,{className:"text-center"},r.a.createElement(v.a.Control,Object.assign({className:"text-center",as:"select",name:"gender"},a("gender")),r.a.createElement("option",{disabled:!0,selected:!0},"Gender"),r.a.createElement("option",{value:"M"},"Male"),r.a.createElement("option",{value:"F"},"Female")),r.a.createElement(v.a.Text,{className:"text-muted"},"For tracking your Rx workouts."),r.a.createElement(v.a.Text,null,c.gender&&l.gender?c.gender:null)))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a.Group,{className:"text-center"},r.a.createElement(v.a.Text,{className:"mb-1"},"(Optional)"),r.a.createElement(v.a.Control,Object.assign({className:"text-center",type:"number",placeholder:"Height in cm"},a("height")))))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,Object.assign({className:"text-center",type:"number",placeholder:"Weight in kg"},a("weight")))))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,Object.assign({className:"text-center",type:"text",placeholder:"Gym name"},a("home_gym")))))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a.Group,{className:"text-center"},r.a.createElement(v.a.Label,{className:"mb-0"},"Date of Birth"),r.a.createElement(v.a.Text,null,"(Optional)"),r.a.createElement(v.a.Control,Object.assign({type:"date",name:"date_of_birth"},a("date_of_birth")))))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(k.a,{variant:"warning",block:!0,onClick:n},"Register")))))}var $=function(e){Object(Y.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(P.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={step:1,firstname:null,lastname:null,username:null,email:null,password:null,gender:null,user_details:{height:null,weight:null,home_gym:null,date_of_birth:null}},e.nextStep=function(){e.setState({step:e.state.step+1})},e.previousStep=function(){e.setState({step:e.state.step-1})},e.saveData=function(t){var a=e.state,n=e.addToObject(a,t);e.setState({res:n}),console.log("FROM REGISTER"),console.log(e.state)},e.registerUser=function(){var t=e.state;delete t.step,delete t.res,console.log("REGISTERING WITH THIS"),console.log(t),y.a.post("".concat("https://pbandjot.herokuapp.com/api","/auth/register"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.props.history.push("/home")})).catch((function(e){console.log(e)}))},e}return Object(L.a)(a,[{key:"addToObject",value:function(e,t){for(var a in t)e[a]=t[a];return e}},{key:"render",value:function(){var e="";switch(this.state.step){case 1:e=r.a.createElement(V,{saveData:this.saveData,nextStep:this.nextStep});break;case 2:e=r.a.createElement(J,{saveData:this.saveData,nextStep:this.nextStep});break;case 3:e=r.a.createElement(K,{saveData:this.saveData,registerUser:this.registerUser})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(h.a,{className:"justify-content-center yellow__text my-3"},r.a.createElement(E.a,{className:"text-center"},r.a.createElement("h1",null,"You're on your way to gains city."))),r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{md:{span:4},xs:{span:10}},r.a.createElement(v.a,null,e))))))}}]),a}(n.Component),Q=Object(m.g)($);function X(e){var t=Object(n.useState)({username:null,password:null}),a=Object(o.a)(t,2),c=a[0],l=a[1],s=function(e){l(Object(g.a)(Object(g.a)({},c),{},Object(f.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(h.a,{className:"justify-content-center yellow__text my-3"},r.a.createElement(E.a,{className:"text-center"},r.a.createElement("h1",null,"Login to record your gains."))),r.a.createElement(h.a,{className:"justify-content-center my-5"},r.a.createElement(E.a,{className:"text-center",md:{span:4},xs:{span:10}},r.a.createElement(v.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Username"),r.a.createElement(v.a.Control,{type:"text",name:"username",placeholder:"",onChange:s})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",name:"password",placeholder:"",onChange:s}),r.a.createElement(v.a.Text,{className:""},e.loginError?e.loginError:r.a.createElement("span",null,"\xa0"))),r.a.createElement(k.a,{variant:"warning",onClick:function(t){t.preventDefault(),console.log("login clicked"),e.loginHandler(c)},block:!0},"Login")))))))}var Z=a(233),ee=a(234),te=a.n(ee);function ae(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:te.a,alt:"workout",className:"p-2"}))}function ne(e){var t=e.record,a=function(e,t){switch(console.log(e),t.workout_type){case"weightlifting":return"".concat(e.pb_weight," lb");case"benchmark":return"".concat(e.pb_time_min,":").concat(e.pb_time_sec.toString().padStart(2,"0"))}}(t,e.workout);console.log(a);var n=0==e.rank?"lead":"";return r.a.createElement("div",null,r.a.createElement(h.a,{className:"text-center mb-2"},r.a.createElement(E.a,{className:n},w()(t.pb_date).format("DD MMM YYYY")),r.a.createElement(E.a,{className:n},a)))}var re=a(235),ce=a.n(re);function le(e){var t=(new Date).toISOString().substring(0,10),a=Object(U.a)({initialValues:{pbDate:t,pbWeight:null,pbTimeMin:null,pbTimeSec:null},validationSchema:q.d().shape({pbDate:q.a(),pbWeight:q.c(),pbTimeMin:q.c().nullable(),pbTimeSec:q.c().max(59).nullable()}),onSubmit:function(t){e.handleCloseModal(),console.log(t);var a={pb_date:t.pbDate,pb_weight:t.pbWeight,pb_time_min:t.pbTimeMin,pb_time_sec:t.pbTimeSec};console.log(a),e.addRecord(a)}}),n=a.getFieldProps,c=a.handleSubmit,l=(a.values,a.errors,a.touched,r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{className:"text-center",md:{span:4},xs:{span:6}},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Your PB Time"),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a.Control,Object.assign({type:"number",placeHolder:"min",className:"text-center"},n("pbTimeMin")))),r.a.createElement(E.a,null,r.a.createElement(v.a.Control,Object.assign({type:"number",placeHolder:"sec",className:"text-center"},n("pbTimeSec")))))))));return r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"yellow__text text-center my-3"},"WHAT IS YOUR NEW PERSONAL BEST?")),r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,null,r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{className:"text-center",md:{span:3},xs:{span:4}},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,{className:""},"Weight in lb"),r.a.createElement(v.a.Control,Object.assign({type:"number",placeholder:"lb",className:"text-center"},n("pbWeight")))))),"weightlifting"!=e.workout_type&&l,r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{className:"text-center",md:{span:6},xs:{span:6}},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Date of PB"),r.a.createElement(v.a.Control,Object.assign({type:"date",max:t},n("pbDate")))))),r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{className:"text-center my-3",md:{span:6},xs:{span:6}},r.a.createElement(k.a,{variant:"warning",onClick:c,block:!0},"SAVE")))))))}function oe(e){var t=r.a.createElement("a",{href:"/home"},r.a.createElement("img",{src:ce.a,alt:"back",width:"30px",className:"top__left__padded"})),a=Object(m.f)(),c=Object(n.useState)(e.currentWorkout),l=Object(o.a)(c,2),s=l[0],u=l[1],d=function(){var e=Object(p.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,y.a.get("".concat("https://pbandjot.herokuapp.com/api","/records/allworkouts/").concat(s._id),{headers:{"x-auth-token":t}});case 3:a=e.sent,u(a.data.workouts[0]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object.keys(s).length<1&&a.push("/home");var b=null;if(Object.keys(s).length>0){var f=s.records;f.sort((function(e,t){return e.pb_date>t.pb_date?-1:e.pb_date<t.pb_date?1:0})),b=f.map((function(e,t){return r.a.createElement(ne,{record:e,workout:s,key:e._id,rank:t})}))}var g=Object(n.useState)(!1),v=Object(o.a)(g,2),_=v[0],j=v[1],w=function(){return j(!1)},N=r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"justify-content-center yellow__background p-2"},t,r.a.createElement(E.a,null,r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"text-center mt-2"},r.a.createElement("h1",null,s.workout_name))),r.a.createElement(h.a,null,r.a.createElement(E.a,null,r.a.createElement(ae,null))),r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,{className:"text-center small m-2",md:{span:6},xs:{span:12}},s.description)))),r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"text-center m-3 font-weight-bold yellow__text"},"Your Personal Bests")),r.a.createElement(h.a,{className:"justify-content-center p-2"},r.a.createElement(E.a,{md:{span:6},xs:{span:12}},b)),r.a.createElement(h.a,{className:"justify-content-center p-2"},r.a.createElement(E.a,{md:{span:6},xs:{span:6}},r.a.createElement(k.a,{variant:"warning",onClick:function(){return j(!0)},block:!0},"Add New PB")))),O="";s&&(O=N);var S=function(){var e=Object(p.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),t.workout_id=s._id,e.next=4,y.a.post("".concat("https://pbandjot.herokuapp.com/api","/records"),t,{headers:{"x-auth-token":a}});case 4:e.sent,d();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=r.a.createElement(x.a,{show:_,onHide:w,centered:!0},r.a.createElement(x.a.Body,null,r.a.createElement(le,{workout_type:s.workout_type,handleCloseModal:w,addRecord:S})));return r.a.createElement(r.a.Fragment,null,O,C)}function se(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(0),s=Object(o.a)(l,2),m=s[0],u=s[1],i=Object(n.useState)(0),p=Object(o.a)(i,2),d=p[0],b=p[1],f=Object(n.useState)(0),g=Object(o.a)(f,2),v=g[0],_=g[1],x=Object(n.useState)(0),j=Object(o.a)(x,2),w=j[0],N=j[1],y=Object(n.useState)(0),O=Object(o.a)(y,2),S=O[0],C=O[1],D=Object(n.useState)(0),M=Object(o.a)(D,2),F=M[0],T=M[1],I=2*(a+m+d+v+w+S)+F;return r.a.createElement(h.a,{className:"justify-content-center"},r.a.createElement(E.a,null,r.a.createElement(h.a,{className:"justify-content-center yellow__text my-3"},r.a.createElement(E.a,{className:"text-center"},r.a.createElement("h4",null,"Barbell PB Calculator"))),r.a.createElement(h.a,{className:"justify-content-center text-center mt-3"},r.a.createElement(E.a,null,"Barbell Weight")),r.a.createElement(h.a,{className:"justify-content-center text-center mt-2"},r.a.createElement(E.a,null,r.a.createElement(k.a,{size:"lg",className:"m-1",onClick:function(){return T(35)},variant:"outline-light"},"35"),r.a.createElement(k.a,{size:"lg",className:"m-1",onClick:function(){return T(45)},variant:"outline-light"},"45"))),r.a.createElement(h.a,{className:"justify-content-center text-center mt-3"},r.a.createElement(E.a,null,"Bumper Plates")),r.a.createElement(h.a,{className:"justify-content-center text-center mt-2"},r.a.createElement(E.a,{md:{span:7},xs:{span:6}},r.a.createElement(h.a,null,r.a.createElement(E.a,{className:"text-center px-1 mt-1"},r.a.createElement(k.a,{block:!0,className:"",onClick:function(){return c(a+10)},variant:"light"},"10"),a>0?a/10:r.a.createElement("span",null,"\xa0")),r.a.createElement(E.a,{className:"text-center px-1 mt-1"},r.a.createElement(k.a,{block:!0,className:"",onClick:function(){return u(m+15)},variant:"secondary"},"15"),m>0?m/15:r.a.createElement("span",null,"\xa0")),r.a.createElement(E.a,{className:"text-center px-1 mt-1"},r.a.createElement(k.a,{block:!0,className:"",onClick:function(){return b(d+25)},variant:"success"},"25"),d>0&&d/25),r.a.createElement(E.a,{className:"text-center px-1 mt-1"},r.a.createElement(k.a,{block:!0,className:"",onClick:function(){return _(v+35)},variant:"warning"},"35"),v>0&&v/35),r.a.createElement(E.a,{className:"text-center px-1 mt-1"},r.a.createElement(k.a,{block:!0,className:"",onClick:function(){return N(w+45)},variant:"primary"},"45"),w>0&&w/45),r.a.createElement(E.a,{className:"text-center px-1 mt-1"},r.a.createElement(k.a,{block:!0,className:"",onClick:function(){return C(S+55)},variant:"danger"},"55"),S>0&&S/55)))),r.a.createElement(h.a,{className:"justify-content-center text-center"},r.a.createElement(E.a,null,r.a.createElement("p",{className:"display-1 text-nowrap"},I," lb"))),r.a.createElement(h.a,{className:"justify-content-center text-center"},r.a.createElement(E.a,null,r.a.createElement(k.a,{size:"lg",className:"m-2",onClick:function(){c(0),u(0),b(0),_(0),N(0),C(0),T(0)},variant:"outline-light"},"Clear")))))}var me="https://pbandjot.herokuapp.com/api";var ue=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),u=Object(o.a)(l,2),i=(u[0],u[1],Object(n.useState)(null)),p=Object(o.a)(i,2),E=p[0],d=p[1],b=Object(n.useState)({}),h=Object(o.a)(b,2),f=h[0],g=h[1],v=Object(n.useState)(""),k=Object(o.a)(v,2),_=k[0],x=k[1],j=function(e){y.a.get("".concat(me,"/auth/user"),{headers:{"x-auth-token":e}}).then((function(e){c(!0),d(e.data.user),console.log(e.data.user)})).catch((function(e){console.log(e)}))};return Object(n.useEffect)((function(){var e=localStorage.getItem("token");null!=e&&(Object(Z.decode)(e)?j(e):localStorage.removeItem("token"));console.log(f)}),[a]),r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement(A,{isAuth:a,logoutHandler:function(){localStorage.clear("token"),c(!1)}}),r.a.createElement("div",{className:"top__right font-italic"},E&&"@".concat(E.username)),r.a.createElement("div",{className:"pt-5"},r.a.createElement(m.c,null,r.a.createElement(G.a,null,r.a.createElement(m.a,{path:"/home",exact:!0},r.a.createElement(W,{user:E,isAuth:a,setCurrentWorkout:g})),r.a.createElement(m.a,{path:"/records"},r.a.createElement(C,null)),r.a.createElement(m.a,{path:"/workout"},r.a.createElement(oe,{currentWorkout:f})),r.a.createElement(m.a,{path:"/register",exact:!0},r.a.createElement(Q,null)),r.a.createElement(m.a,{path:"/login",exact:!0},a?r.a.createElement(W,{user:E,isAuth:a,setCurrentWorkout:g}):r.a.createElement(X,{loginHandler:function(e){y.a.post("".concat(me,"/auth/login"),e).then((function(e){localStorage.setItem("token",e.data.token),j(e.data.token),c(!0),x("")})).catch((function(e){console.log("ERROR HERE"),console.log(e),x(e.response.data.message)}))},loginError:_})),r.a.createElement(m.a,{path:"/calculator"},r.a.createElement(se,null)),r.a.createElement(m.a,{path:"/",exact:!0},r.a.createElement(W,{user:E,isAuth:a,setCurrentWorkout:g})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(399);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[237,1,2]]]);
//# sourceMappingURL=main.31c125ec.chunk.js.map