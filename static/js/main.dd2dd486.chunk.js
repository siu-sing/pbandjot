(this.webpackJsonpviews=this.webpackJsonpviews||[]).push([[0],{209:function(e,t,a){e.exports=a.p+"static/media/logo.c4c0a4c3.svg"},216:function(e,t,a){e.exports=a(360)},221:function(e,t,a){},222:function(e,t,a){},264:function(e,t){},266:function(e,t){},302:function(e,t){},303:function(e,t){},360:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(45),c=a.n(l),o=(a(221),a(8)),s=(a(222),a(62)),u=a(11),i=a(19),m=a.n(i),d=a(43),p=a(202),h=a(366),g=a(367),f=a(362),b=a(30),E=a(103),v=a(365),k=a(368);function w(e){var t=e.workout,a=(t._id,t.workout_type),l=Object(n.useState)(e.formData.pb_date),c=Object(o.a)(l,2),s=c[0],u=c[1],i=Object(n.useState)(""),h=Object(o.a)(i,2),g=h[0],w=h[1],_=Object(n.useState)(""),O=Object(o.a)(_,2),j=O[0],x=O[1],S=Object(n.useState)(""),y=Object(o.a)(S,2),C=y[0],N=y[1],D=function(t){e.setFormData(Object(E.a)({},e.formData,Object(b.a)({},t.target.name,t.target.value)))},I=function(){var t=Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addHandler();case 2:u((new Date).toISOString().substring(0,10)),w(""),x(""),N("");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(p.a,null,r.a.createElement(v.a,null,r.a.createElement(v.a.Group,{as:f.a},r.a.createElement(p.a,{className:"col-5 p-0"},"weightlifting"!==a&&r.a.createElement(f.a,{className:"mx-2 text-center"},r.a.createElement(p.a,{className:"p-0 time__input"},r.a.createElement(v.a.Control,{className:"text-center",size:"sm",type:"number",placeholder:"00",value:j,name:"pb_time_min",onChange:function(e){x(e.target.value),D(e)}})),r.a.createElement("span",{className:"my-auto mx-1"},":"),r.a.createElement(p.a,{className:"p-0 time__input"},r.a.createElement(v.a.Control,{className:"text-center",size:"sm",type:"number",placeholder:"00",value:C,name:"pb_time_sec",onChange:function(e){N(e.target.value),D(e)}}))),r.a.createElement(p.a,null,r.a.createElement(v.a.Control,{size:"sm",type:"number",placeholder:"lb",value:g,name:"pb_weight",onChange:function(e){w(e.target.value),D(e)}}))),r.a.createElement(p.a,{className:"col-5 p-0"},r.a.createElement(v.a.Control,{size:"sm",type:"date",value:s,name:"pb_date",onChange:function(e){u(e.target.value),D(e)}})),r.a.createElement(p.a,{className:"col-2 p-0 pl-1 "},r.a.createElement(k.a,{className:"btn btn-block",size:"sm",onClick:I},"+")))))}var _=a(364),O=a(118),j=a.n(O),x=a(17),S=a.n(x);function y(e){var t=e.record,a=t.pb_date,l=t.pb_time_min,c=t.pb_time_sec,s=t.pb_weight,u=t.prescribed,i=(t.liked_by,e.workout),h=(i._id,i.description,i.prescribed_female,i.prescribed_male),g=(i.workout_name,"");switch(i.workout_type){case"weightlifting":g="".concat(s,"lb");break;case"benchmark":g="".concat(l,":").concat(c.toString().padStart(2,"0"))}var b=j()().diff(a,"days")>5?j()(a).format("D MMM YYYY"):j()(a).fromNow(),E=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),t.prev=1,t.next=4,S.a.delete("".concat("http://localhost:6969/api","/records/").concat(a),{headers:{"x-auth-token":n}});case 4:return t.sent,t.next=7,e.fetchRecords();case 7:y(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),v=Object(n.useState)(!1),w=Object(o.a)(v,2),O=w[0],x=w[1],y=function(){return x(!1)},C=r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{className:"my-2"},r.a.createElement(p.a,{xs:5},r.a.createElement(f.a,{className:""},r.a.createElement(p.a,{className:"text-right p-0"},g),r.a.createElement(p.a,{className:"p-0 pl-1 text-center"},h&&u&&"Rx"))),r.a.createElement(p.a,{xs:5,className:"text-muted font-italic text-center"},b),r.a.createElement(p.a,{xs:2},r.a.createElement(k.a,{size:"sm",variant:"outline-danger",onClick:function(){return x(!0)}},"-"))),r.a.createElement(_.a,{show:O,onHide:y},r.a.createElement(_.a.Header,{closeButton:!0},"Delete record?"),r.a.createElement(_.a.Footer,null,r.a.createElement(k.a,{variant:"secondary",onClick:y},"No"),r.a.createElement(k.a,{variant:"danger",onClick:function(){return E(e.record._id)}},"Yes"))));return r.a.createElement("div",null,C)}function C(e){var t=function(){if(x.length>0)switch(_.workout_type){case"weightlifting":var e=x[0].pb_weight;return x.forEach((function(t){e<t.pb_weight&&(e=t.pb_weight)})),"".concat(e,"lb");case"benchmark":var t=86400;return x.forEach((function(e){var a=60*e.pb_time_min+e.pb_time_sec;t>a&&(t=a)})),"".concat(Math.floor(t/60),":").concat((t%60).toString().padStart(2,"0"))}},a=Object(n.useState)((new Date).toISOString().substring(0,10)),l=Object(o.a)(a,2),c=l[0],s=(l[1],{pb_date:c,pb_weight:null,pb_time_min:null,pb_time_sec:null,workout_id:e.workout._id}),u=Object(n.useState)(s),i=Object(o.a)(u,2),b=i[0],E=i[1],v=Object(n.useState)(e.workout),k=Object(o.a)(v,2),_=k[0],O=(k[1],Object(n.useState)(e.workout.records)),j=Object(o.a)(O,2),x=j[0],C=j[1],N=Object(n.useState)(t()),D=Object(o.a)(N,2),I=D[0],G=D[1],R=function(){var a=Object(d.a)(m.a.mark((function a(){var n,r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("token"),a.next=3,S.a.get("".concat("http://localhost:6969/api","/records/workouts/").concat(e.workout._id),{headers:{"x-auth-token":n}});case 3:r=a.sent,C(r.data.records),G(t()),console.log(I);case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Object(n.useEffect)((function(){R()}),[]);var F=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,S.a.post("".concat("http://localhost:6969/api","/records"),b,{headers:{"x-auth-token":t}});case 3:e.sent,R();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return x.sort((function(e,t){return e.pb_date>t.pb_date?-1:e.pb_date<t.pb_date?1:0})),r.a.createElement(p.a,{className:"mx-auto my-1 "},r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(h.a.Toggle,{className:"text-left",as:g.a.Header,eventKey:"0"},r.a.createElement(f.a,null,r.a.createElement(p.a,null,_.workout_name),r.a.createElement(p.a,{className:"text-right"},I))),r.a.createElement(h.a.Collapse,{eventKey:"0"},r.a.createElement(g.a.Body,{className:"small__text"},r.a.createElement(f.a,{className:""},r.a.createElement(w,{workout:_,formData:b,setFormData:E,addHandler:F})),r.a.createElement(f.a,null,r.a.createElement(p.a,null,x.map((function(e){return r.a.createElement(y,{workout:_,record:e,key:e._id,fetchRecords:R})})))))))))}function N(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(a),s=Object(o.a)(c,2),u=s[0],i=s[1],p=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],n="all"!==t.target.value?a.filter((function(e){return e.workout_type===t.target.value})):a,i(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=localStorage.getItem("token"),t=null,a=null;(function(){var e=Object(d.a)(m.a.mark((function e(n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat("http://localhost:6969/api","/records"),{headers:{"x-auth-token":n}});case 3:return r=e.sent,t=r.data.records,e.next=7,S.a.get("".concat("http://localhost:6969/api","/workouts"));case 7:c=e.sent,(a=c.data.workouts).forEach((function(e){e.records=[],t.forEach((function(t){e._id.toString()==t.workout_id.toString()&&e.records.push(t)}))})),a.sort(h),l(a),i(a),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}})()(e)}),[]);var h=function(e,t){if(e.records.length>0&&t.records.length>0){var a=g(e.records),n=g(t.records);return a>n?-1:a<n?1:0}return 0==e.records.length&&t.records.length>0?1:0==t.records.length&&e.records.length>0?-1:0},g=function(e){var t=e[0].pb_date;return e.forEach((function(e){e.pb_date>t&&(t=e.pb_date)})),t};return r.a.createElement("div",null,r.a.createElement("div",{className:"my-2"},r.a.createElement(k.a,{value:"all",onClick:p,variant:"outline-dark"},"All")," ",r.a.createElement(k.a,{value:"weightlifting",onClick:p,variant:"outline-dark"},"Weightlifting")," ",r.a.createElement(k.a,{value:"benchmark",onClick:p,variant:"outline-dark"},"Benchmark WODs")," "),u?u.map((function(e){return r.a.createElement(C,{workout:e,key:e._id})})):"STANDBY FOR GAINS")}var D=a(209),I=a.n(D);function G(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:I.a,alt:"pbandjot"})," ",r.a.createElement("br",null),"PB&J")}function R(e){var t=e.user;return r.a.createElement("div",{className:"text-center"},r.a.createElement(G,null),"Record your personal bests.",t&&r.a.createElement("div",null,t.username))}var F=a(363);function M(e){var t=Object(u.f)();return r.a.createElement("div",null,r.a.createElement(s.b,{to:"/",onClick:e.closeMenu,className:"bm-item"},"Home"),r.a.createElement(s.b,{to:"/records",onClick:e.closeMenu,className:"bm-item"},"Records"),r.a.createElement(s.b,{to:"/register",onClick:e.closeMenu,className:"bm-item"},"Register"),r.a.createElement(s.b,{to:"/login",onClick:e.closeMenu,className:"bm-item"},"Login"),r.a.createElement(s.b,{to:"#",onClick:function(){localStorage.clear("token"),e.closeMenu(),t.push("/")},className:"bm-item"},"Logout"))}var H=a(210);function L(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],l=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.slide,{isOpen:a,onStateChange:function(e){return function(e){l(e.isOpen)}(e)},pageWrapId:"page-wrap",outerContainerId:"outer-container"},r.a.createElement(M,{closeMenu:function(){l(!1),console.log("something happened")}})))}var U=a(51),P=a(52),T=a(56),B=a(57),W=(n.Component,n.Component,n.Component,a(81)),Y=a(20);function q(e){var t=Object(W.a)({initialValues:{username:"",password:""},validationSchema:Y.d().shape({username:Y.e().required("Required").test("checkUsernameExists","Username already exists",(function(e){return new Promise((function(t,a){S.a.get("".concat("http://localhost:6969/api","/auth/usercheck/").concat(e)).then((function(e){"User exists"==e.data.message?t(!1):t(!0)})).catch((function(e){console.log(e)}))}))})),password:Y.e().min(8,"Must be more than 8 characters").required("Required")}),onSubmit:function(t){e.saveData(t),e.nextStep()}}),a=t.getFieldProps,n=t.handleSubmit,l=(t.values,t.errors),c=t.touched;return r.a.createElement("div",null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Select a Username"),r.a.createElement(v.a.Control,Object.assign({type:"text",id:"username",placeholder:"Username"},a("username"))),c.username&&(l.username?l.username:"You are unique.")),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,Object.assign({type:"password",id:"password",placeholder:""},a("password"))),l.password&&c.password?l.password:null),r.a.createElement(k.a,{onClick:n},"Next"))}function z(e){var t=Object(W.a)({initialValues:{firstname:"",lastname:"",email:""},validationSchema:Y.d().shape({firstname:Y.e(),lastname:Y.e(),email:Y.e().email("Invalid email address").required("Required").test("checkEmailExists","Email already exists.",(function(e){return new Promise((function(t,a){S.a.get("".concat("http://localhost:6969/api","/auth/emailcheck/").concat(e)).then((function(e){"Email exists"==e.data.message?t(!1):t(!0)})).catch((function(e){console.log(e)}))}))}))}),onSubmit:function(t){e.saveData(t),e.nextStep()}}),a=t.getFieldProps,n=t.handleSubmit,l=(t.values,t.errors),c=t.touched;return r.a.createElement("div",null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Your contact details"),r.a.createElement(v.a.Control,Object.assign({type:"text",placeholder:"First Name"},a("firstname"))),l.firstname&&c.firstname?l.firstname:null),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,Object.assign({type:"text",placeholder:"Last Name"},a("lastname"))),l.lastname&&c.lastname?l.lastname:null),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,Object.assign({type:"email",placeholder:"Email"},a("email"))),l.email&&c.email?l.email:null),r.a.createElement(k.a,{onClick:n},"Next"))}function A(e){var t=Object(W.a)({initialValues:{gender:"Gender",height:null,weight:null,home_gym:"",date_of_birth:""},validationSchema:Y.d().shape({gender:Y.b().oneOf(["M","F"],"Please select gender."),height:Y.c().nullable(),weight:Y.c().nullable(),home_gym:Y.e(),date_of_birth:Y.a()}),onSubmit:function(t){console.log(t);var a={gender:t.gender,user_details:{height:t.height,weight:t.weight,home_gym:t.home_gym,date_of_birth:t.date_of_birth}};e.saveData(a),e.registerUser()}}),a=t.getFieldProps,n=t.handleSubmit,l=(t.values,t.errors),c=t.touched;return r.a.createElement("div",null,r.a.createElement(v.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(v.a.Control,Object.assign({as:"select",name:"gender"},a("gender")),r.a.createElement("option",{disabled:!0,selected:!0},"Gender"),r.a.createElement("option",{value:"M"},"Male"),r.a.createElement("option",{value:"F"},"Female")),r.a.createElement(v.a.Text,{className:"text-muted"},"For tracking your Rx workouts."),l.gender&&c.gender?l.gender:null),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,Object.assign({type:"number",placeholder:"Height in cm"},a("height")))),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,Object.assign({type:"number",placeholder:"Weight in kg"},a("weight")))),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,Object.assign({type:"text",placeholder:"Gym name"},a("home_gym")))),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Date of Birth"),r.a.createElement(v.a.Control,Object.assign({type:"date",name:"date_of_birth"},a("date_of_birth")))),r.a.createElement(k.a,{onClick:n},"Register"))}var J=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(U.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={step:1,firstname:null,lastname:null,username:null,email:null,password:null,gender:null,user_details:{height:null,weight:null,home_gym:null,date_of_birth:null}},e.nextStep=function(){e.setState({step:e.state.step+1})},e.previousStep=function(){e.setState({step:e.state.step-1})},e.saveData=function(t){var a=e.state,n=e.addToObject(a,t);e.setState({res:n}),console.log("FROM REGISTER"),console.log(e.state)},e.registerUser=function(){var t=e.state;delete t.step,delete t.res,console.log("REGISTERING WITH THIS"),console.log(t),S.a.post("".concat("http://localhost:6969/api","/auth/register"),t).then((function(e){console.log(e.data),localStorage.setItem("token",e.data.token)})).catch((function(e){console.log(e)}))},e}return Object(P.a)(a,[{key:"addToObject",value:function(e,t){for(var a in t)e[a]=t[a];return e}},{key:"render",value:function(){var e="";switch(this.state.step){case 1:e=r.a.createElement(q,{saveData:this.saveData,nextStep:this.nextStep});break;case 2:e=r.a.createElement(z,{saveData:this.saveData,nextStep:this.nextStep});break;case 3:e=r.a.createElement(A,{saveData:this.saveData,registerUser:this.registerUser})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(v.a.Row,null,e)))}}]),a}(n.Component);function V(e){var t=Object(n.useState)({username:null,password:null}),a=Object(o.a)(t,2),l=a[0],c=a[1],s=function(e){c(Object(E.a)({},l,Object(b.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome back"),r.a.createElement(v.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Username"),r.a.createElement(v.a.Control,{type:"text",name:"username",placeholder:"username",onChange:s})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",name:"password",placeholder:"",onChange:s})),r.a.createElement(k.a,{onClick:function(t){t.preventDefault(),console.log("login clicked"),e.loginHandler(l)}},"Login")))}var K=a(214),$="http://localhost:6969/api";var Q=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),i=Object(o.a)(c,2),m=(i[0],i[1],Object(n.useState)(null)),d=Object(o.a)(m,2),p=d[0],h=d[1],g=function(e){S.a.get("".concat($,"/auth/user"),{headers:{"x-auth-token":e}}).then((function(e){l(!0),h(e.data.user)})).catch((function(e){console.log(e)}))};return Object(n.useEffect)((function(){var e=localStorage.getItem("token");null!=e&&(Object(K.decode)(e)?g(e):localStorage.removeItem("token"))}),[]),r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement(L,null),r.a.createElement("div",{className:"pt-5"},r.a.createElement(u.c,null,r.a.createElement(F.a,null,r.a.createElement(u.a,{path:"/",exact:!0},r.a.createElement(R,{user:p})),r.a.createElement(u.a,{path:"/records"},r.a.createElement(N,null)),r.a.createElement(u.a,{path:"/register",exact:!0},r.a.createElement(J,null)),r.a.createElement(u.a,{path:"/login",exact:!0},a?r.a.createElement(R,{user:p}):r.a.createElement(V,{loginHandler:function(e){S.a.post("".concat($,"/auth/login"),e).then((function(e){localStorage.setItem("token",e.data.token),g(e.data.token),l(!0)})).catch((function(e){console.log(e)}))}})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(359);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[216,1,2]]]);
//# sourceMappingURL=main.dd2dd486.chunk.js.map